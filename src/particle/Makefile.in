#  DccNiTghtmare: a satirical post-apocalyptical RPG.
#  Copyright (C) 2005-2011 DNTeam <dnt@dnteam.org>
# 
#  This file is part of DccNiTghtmare.
# 
#  DccNiTghtmare is free software: you can redistribute it and/or modify
#  it under the terms of the GNU General Public License as published by
#  the Free Software Foundation, either version 3 of the License, or
#  (at your option) any later version.
#
#  DccNiTghtmare is distributed in the hope that it will be useful,
#  but WITHOUT ANY WARRANTY; without even the implied warranty of
#  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#  GNU General Public License for more details.
#
#  You should have received a copy of the GNU General Public License
#  along with DccNiTghtmare.  If not, see <http://www.gnu.org/licenses/>.

CFLAGS = @CPPFLAGS@ -g -c -Wall -O2
CC = @CXX@
LDFLAGS = @LDFLAGS@
LIBS= @LIBS@
EFLAGS = @CPPFLAGS@ $(LDFLAGS) $(LIBS)
ENDENGINE=../engine/
ENDETC=../etc/
ENDMAP=../map/

OBJS = interplane.o lake.o particle.o partcontroller.o partelement.o \
       partlist.o partorigin.o

all: $(OBJS)

interplane.o: interplane.cpp interplane.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) interplane.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

grass.o: grass.cpp grass.h particle.h wind.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) grass.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

lake.o: lake.cpp lake.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) lake.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

particle.o: particle.cpp particle.h partelement.h partorigin.h \
            $(ENDETC)defparser.h $(ENDETC)extensions.h \
            $(ENDETC)dirs.h $(ENDENGINE)culling.h $(ENDETC)list.h \
				$(ENDMAP)map.h $(ENDENGINE)character.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) particle.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

wave.o: wave.cpp wave.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) wave.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

wind.o: wind.h wind.cpp
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) wind.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

partelement.o: partelement.cpp partelement.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) partelement.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

partlist.o: partlist.cpp partlist.h particle.h $(ENDETC)list.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) partlist.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

partorigin.o: partorigin.cpp partorigin.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) partorigin.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

partcontroller.o: partcontroller.cpp partcontroller.h particle.h \
                  partlist.h $(ENDENGINE)collision.h $(ENDENGINE)character.h \
						$(ENDETC)dirs.h $(ENDETC)extensions.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) partcontroller.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

clean: 
	@printf "Cleaning Particle Bin Files...\n"
	@\rm -rf *.o *.e
	@printf "\e[0;32mCleaned.\e[0;0m\n"
