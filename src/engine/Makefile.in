#  DccNiTghtmare: a satirical post-apocalyptical RPG.
#  Copyright (C) 2005-2011 DNTeam <dnt@dnteam.org>
# 
#  This file is part of DccNiTghtmare.
# 
#  DccNiTghtmare is free software: you can redistribute it and/or modify
#  it under the terms of the GNU General Public License as published by
#  the Free Software Foundation, either version 3 of the License, or
#  (at your option) any later version.
#
#  DccNiTghtmare is distributed in the hope that it will be useful,
#  but WITHOUT ANY WARRANTY; without even the implied warranty of
#  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#  GNU General Public License for more details.
#
#  You should have received a copy of the GNU General Public License
#  along with DccNiTghtmare.  If not, see <http://www.gnu.org/licenses/>.

prefix = @prefix@
datadir = @datarootdir@
datarootdir = @datarootdir@
localedir = @localedir@
DEFS = -DLOCALEDIR=\"$(localedir)\"

CFLAGS = @CPPFLAGS@ $(DEFS) -g -c -Wall -O2
CC = @CXX@
EFLAGS = @CPPFLAGS@
LDFLAGS = @LDFLAGS@
LIBS = @LIBS@


ENDGUI = ../gui/
ENDENGINE = ../engine/
ENDMAP = ../map/
ENDNET = ../net/
ENDIA = ../ia/
ENDCLASSES = ../classes/
ENDSOUND = ../sound/
ENDLANG = ../lang/
ENDPART = ../particle/
ENDFIGHT = ../fight/
ENDETC = ../etc/
ENDCBOOK = ../cbook/

OBJSCBOOK = $(ENDCBOOK)comicbox.o $(ENDCBOOK)comicbook.o $(ENDCBOOK)comicpage.o
OBJSMAPA = $(ENDMAP)map.o $(ENDMAP)mapfog.o $(ENDMAP)maplights.o \
           $(ENDMAP)mapsound.o $(ENDMAP)door.o
FARSOLIB = $(ENDGUI)libfarso.a
OBJSNET = #$(ENDNET)client.o $(ENDNET)common.o
OBJSIA = $(ENDIA)agent.o $(ENDIA)pattAgent.o $(ENDIA)potentAgent.o \
         $(ENDIA)astar.o $(ENDIA)fuzzy.o $(ENDIA)fuzzyvariable.o \
         $(ENDIA)fuzzyfunction.o $(ENDIA)fuzzyrule.o  $(ENDIA)iafuncs.o \
         $(ENDIA)iascript.o $(ENDIA)iastack.o $(ENDIA)iavariable.o
OBJSCLASSES = $(ENDCLASSES)classes.o $(ENDCLASSES)race.o \
              $(ENDCLASSES)skills.o $(ENDCLASSES)align.o \
              $(ENDCLASSES)feats.o $(ENDCLASSES)defs.o \
              $(ENDCLASSES)dices.o $(ENDCLASSES)actions.o \
              $(ENDCLASSES)thing.o $(ENDCLASSES)object.o \
              $(ENDCLASSES)itemslot.o $(ENDCLASSES)inventory.o \
              $(ENDCLASSES)barter.o $(ENDCLASSES)weapon.o \
              $(ENDCLASSES)mission.o $(ENDCLASSES)xp.o \
              $(ENDCLASSES)pendingaction.o $(ENDCLASSES)money.o \
              $(ENDCLASSES)modeffect.o
OBJSSOUND = $(ENDSOUND)ogg_stream.o  $(ENDSOUND)sound.o $(ENDSOUND)sndfx.o
OBJSLANG = $(ENDLANG)translate.o
OBJSPART = $(ENDPART)lake.o $(ENDPART)particle.o $(ENDPART)partorigin.o \
           $(ENDPART)partcontroller.o $(ENDPART)partelement.o \
           $(ENDPART)partlist.o $(ENDPART)interplane.o
OBJSFIGHT = $(ENDFIGHT)fightGroup.o $(ENDFIGHT)initiative.o \
            $(ENDFIGHT)fightSystem.o
OBJSETC = $(ENDETC)animodel.o $(ENDETC)extensions.o $(ENDETC)message3d.o \
          $(ENDETC)scenenode.o $(ENDETC)scene.o $(ENDETC)cal3dmodel.o \
			 $(ENDETC)userinfo.o $(ENDETC)dirs.o $(ENDETC)md5model.o \
          $(ENDETC)overlaps.o $(ENDETC)defparser.o $(ENDETC)md5anim.o \
          $(ENDETC)texrenderer.o $(ENDETC)shader.o $(ENDETC)quaternion.o \
          $(ENDETC)btreecell.o $(ENDETC)btree.o $(ENDETC)npcfile.o \
          $(ENDETC)list.o $(ENDETC)boundingbox.o
OBJS = alignwindow.o aspectwindow.o attwindow.o barterwindow.o briefing.o \
       camera.o character.o charwindow.o classwindow.o collision.o \
		 culling.o cursor.o dialog.o dccnit.o featsel.o \
		 featswindow.o initial.o inventwindow.o \
		 itemwindow.o journalwindow.o levelup.o minimapwindow.o \
		 modstate.o moneywindow.o options.o \
		 racewindow.o savefile.o savewindow.o skillwindow.o shadow.o \
		 shortcutswindow.o sky.o sun.o teste.o util.o
BIN = ../../bin/
SUPREDE = #-DVIDEO_MODE #-DREDE #comente para nao ter suporte a rede na bagaca
FIFO = #../etc/fifo.o

all: $(BIN)dnt

alignwindow.o: alignwindow.h alignwindow.cpp $(ENDGUI)farso.h $(ENDCLASSES)align.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) $(SUPREDE) alignwindow.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

aspectwindow.o: aspectwindow.h aspectwindow.cpp $(ENDGUI)farso.h character.h $(ENDETC)userinfo.h $(ENDETC)dirs.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) $(SUPREDE) aspectwindow.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

attwindow.o: attwindow.h attwindow.cpp $(ENDGUI)farso.h $(ENDCLASSES)skills.h $(ENDETC)dirs.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) $(SUPREDE) attwindow.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

barterwindow.o: barterwindow.h barterwindow.cpp $(ENDGUI)farso.h $(ENDCLASSES)barter.h inventwindow.h itemwindow.h $(ENDETC)dirs.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) $(SUPREDE) barterwindow.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

briefing.o: briefing.cpp briefing.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) briefing.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

camera.o: camera.cpp camera.h $(ENDMAP)map.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) camera.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

character.o: character.cpp character.h $(ENDGUI)draw.h $(ENDGUI)picture.h \
             $(ENDGUI)healthBar.h $(ENDCLASSES)thing.h $(ENDCLASSES)feats.h \
				 $(ENDCLASSES)classes.h $(ENDCLASSES)race.h \
				 $(ENDCLASSES)inventory.h $(ENDIA)astar.h $(ENDETC)animodel.h \
				 $(ENDMAP)map.h barterwindow.h $(ENDETC)dirs.h \
				 $(ENDCLASSES)modeffect.h $(ENDCLASSES)feats.h \
				 $(ENDIA)iascript.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) character.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

charwindow.o: charwindow.h charwindow.cpp character.h $(ENDGUI)farso.h \
				 $(ENDCLASSES)modeffect.h $(ENDCLASSES)feats.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) charwindow.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

classwindow.o: classwindow.h classwindow.cpp $(ENDGUI)farso.h $(ENDCLASSES)classes.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) classwindow.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

collision.o: collision.cpp collision.h $(ENDMAP)map.h character.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) collision.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

culling.o: culling.cpp culling.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) culling.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

cursor.o: cursor.cpp cursor.h $(ENDETC)dirs.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) cursor.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

dialog.o: dialog.cpp dialog.h $(ENDGUI)farso.h character.h barterwindow.h \
          $(ENDIA)iascript.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) dialog.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

dccnit.o: dccnit.h dccnit.cpp util.h $(ENDETC)userinfo.h \
          $(ENDCLASSES)skills.h $(ENDCLASSES)feats.h \
			 $(ENDCLASSES)race.h $(ENDCLASSES)classes.h \
			 $(ENDCLASSES)weapon.h $(ENDCLASSES)actions.h \
			 $(ENDCLASSES)mission.h $(ENDETC)message3d.h $(ENDETC)dirs.h \
			 $(ENDFIGHT)fightSystem.h $(ENDGUI)farso.h $(ENDMAP)map.h \
			 $(ENDPART)partcontroller.h $(ENDPART)particle.h \
			 $(ENDSOUND)sound.h $(ENDIA)iascript.h $(ENDIA)astar.h \
			 alignwindow.h aspectwindow.h attwindow.h camera.h character.h \
			 classwindow.h collision.h cursor.h dialog.h featsel.h initial.h \
			 inventwindow.h itemwindow.h modstate.h options.h racewindow.h \
			 shadow.h shortcutswindow.h skillwindow.h sun.h util.h savefile.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) $(SUPREDE) dccnit.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

featsel.o: featsel.h featsel.cpp character.h $(ENDGUI)farso.h \
           $(ENDCLASSES)feats.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) featsel.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

featswindow.o: featswindow.h featswindow.cpp character.h $(ENDGUI)farso.h $(ENDCLASSES)feats.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) featswindow.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"


initial.o: initial.h initial.cpp $(ENDGUI)farso.h $(ENDSOUND)sound.h ../config.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) $(SUPREDE) initial.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

inventwindow.o: inventwindow.h inventwindow.cpp $(ENDGUI)farso.h \
                $(ENDCLASSES)inventory.h $(ENDMAP)map.h cursor.h \
					 modstate.h util.h itemwindow.h $(ENDETC)dirs.h \
					 $(ENDIA)iascript.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) $(SUPREDE) inventwindow.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

itemwindow.o: itemwindow.h itemwindow.cpp $(ENDGUI)farso.h $(ENDCLASSES)object.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) itemwindow.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

journalwindow.o: journalwindow.h journalwindow.cpp $(ENDGUI)farso.h $(ENDCLASSES)mission.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) $(SUPREDE) journalwindow.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

levelup.o: levelup.cpp levelup.h character.h cursor.h classwindow.h skillwindow.h options.h culling.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) levelup.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

minimapwindow.o: minimapwindow.h minimapwindow.cpp $(ENDGUI)farso.h $(ENDMAP)map.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) $(SUPREDE) minimapwindow.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

modstate.o: modstate.h modstate.cpp $(ENDCLASSES)inventory.h $(ENDMAP)map.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) $(SUPREDE) modstate.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

moneywindow.o: moneywindow.h moneywindow.cpp $(ENDGUI)farso.h \
               $(ENDCLASSES)object.h $(ENDCLASSES)inventory.h \
					$(ENDCLASSES)money.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) moneywindow.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

options.o: options.h options.cpp $(ENDGUI)farso.h $(ENDETC)userinfo.h $(ENDETC)dirs.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) $(SUPREDE) options.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

racewindow.o: racewindow.h racewindow.cpp $(ENDGUI)farso.h $(ENDCLASSES)race.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) $(SUPREDE) racewindow.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

savefile.o: savefile.h savefile.cpp dccnit.h modstate.h $(ENDGUI)farso.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) savefile.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

savewindow.o: savefile.h savewindow.cpp savewindow.h $(ENDGUI)farso.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) savewindow.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

skillwindow.o: skillwindow.h skillwindow.cpp $(ENDGUI)farso.h $(ENDCLASSES)skills.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) $(SUPREDE) skillwindow.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

shadow.o: shadow.h shadow.cpp camera.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) $(SUPREDE) shadow.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

shortcutswindow.o: shortcutswindow.h shortcutswindow.cpp $(ENDGUI)farso.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) $(SUPREDE) shortcutswindow.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

sky.o: sky.h sky.cpp $(ENDMAP)map.h $(ENDETC)dirs.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) $(SUPREDE) sky.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"
	
sun.o: sun.h sun.cpp $(ENDETC)dirs.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) $(SUPREDE) sun.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

teste.o: teste.cpp ../config.h dccnit.h $(ENDGUI)farso.h $(ENDETC)dirs.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) $(SUPREDE) teste.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

util.o: util.cpp util.h $(ENDGUI)farso.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) $(SUPREDE) util.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

$(BIN)dnt: $(FARSOLIB) $(OBJSMAPA) $(OBJSNET) $(OBJSETC) $(OBJSCLASSES) $(OBJSLANG) $(OBJSSOUND) $(OBJSPART) $(OBJSFIGHT) $(OBJSIA) $(OBJSCBOOK) $(OBJS)  
	@printf "Linking $@...\n"
	@$(CC) $(LDFLAGS) $(LIBS) $(EFLAGS) $(OBJSCLASSES) $(OBJSLANG) $(OBJSNET) $(OBJSETC) $(OBJSIA) $(FIFO) $(OBJSMAPA) $(OBJSCBOOK) $(OBJSSOUND) $(OBJSPART) $(OBJSFIGHT) $(OBJS) $(FARSOLIB) $(SUPREDE) -o $@
	@printf "\e[0;32mLinked\e[0;0m ($@)\n"

clean:
	@printf "Cleaning Engine Bin Files...\n"
	@\rm -rf *.o *.e $(BIN)dnt
	@printf "\e[0;32mCleaned.\e[0;0m\n"
