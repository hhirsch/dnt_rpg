#  DNT: a satirical post-apocalyptical RPG.
#  Copyright (C) 2005-2012 DNTeam <dnt@dnteam.org>
# 
#  This file is part of DNT.
# 
#  DNT is free software: you can redistribute it and/or modify
#  it under the terms of the GNU General Public License as published by
#  the Free Software Foundation, either version 3 of the License, or
#  (at your option) any later version.
#
#  DNT is distributed in the hope that it will be useful,
#  but WITHOUT ANY WARRANTY; without even the implied warranty of
#  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#  GNU General Public License for more details.
#
#  You should have received a copy of the GNU General Public License
#  along with DNT.  If not, see <http://www.gnu.org/licenses/>.

CFLAGS = @CPPFLAGS@ -g -c -Wall -O2
CC = @CXX@
LDFLAGS = @LDFLAGS@
LIBS= @LIBS@
EFLAGS = @CPPFLAGS@ $(LDFLAGS) $(LIBS)
ENDGUI = ../../gui/
ENDENGINE = ../../engine/
ENDMAP = ../../map/
ENDETC = ../../etc/
ENDIA = ../../ia/
ENDPART = ../../particle/
ENDCLASSES = ../../classes/
ENDFIGHT = ../../fight/
ENDSOUND = ../../sound/
ENDLANG = ../../lang/
ENDCBOOK = ../../cbook/

OBJSCBOOK = $(ENDCBOOK)comicbox.o $(ENDCBOOK)comicbook.o \
            $(ENDCBOOK)comicpage.o
OBJSMAPA = $(ENDMAP)map.o $(ENDMAP)mapfog.o $(ENDMAP)maplights.o \
           $(ENDMAP)mapsound.o $(ENDMAP)door.o
FARSOLIB = $(ENDGUI)libfarso.a
OBJSNET = #$(ENDNET)client.o $(ENDNET)common.o
OBJSIA = $(ENDIA)agent.o $(ENDIA)pattAgent.o $(ENDIA)potentAgent.o \
         $(ENDIA)astar.o $(ENDIA)fuzzy.o $(ENDIA)fuzzyvariable.o \
         $(ENDIA)fuzzyfunction.o $(ENDIA)fuzzyrule.o $(ENDIA)iafuncs.o \
         $(ENDIA)iascript.o $(ENDIA)iastack.o $(ENDIA)iavariable.o
OBJSCLASSES = $(ENDCLASSES)classes.o $(ENDCLASSES)race.o \
              $(ENDCLASSES)skills.o $(ENDCLASSES)align.o \
              $(ENDCLASSES)feats.o $(ENDCLASSES)defs.o \
              $(ENDCLASSES)dices.o $(ENDCLASSES)actions.o \
              $(ENDCLASSES)thing.o $(ENDCLASSES)object.o \
              $(ENDCLASSES)itemslot.o $(ENDCLASSES)inventory.o \
              $(ENDCLASSES)barter.o $(ENDCLASSES)weapon.o \
              $(ENDCLASSES)mission.o $(ENDCLASSES)xp.o \
              $(ENDCLASSES)pendingaction.o $(ENDCLASSES)money.o \
              $(ENDCLASSES)modeffect.o
OBJSSOUND = $(ENDSOUND)ogg_stream.o  $(ENDSOUND)sound.o $(ENDSOUND)sndfx.o
OBJSLANG = $(ENDLANG)translate.o
OBJSPART = $(ENDPART)partcontroller.o $(ENDPART)lake.o $(ENDPART)partorigin.o \
           $(ENDPART)partelement.o $(ENDPART)partlist.o $(ENDPART)particle.o \
			  $(ENDPART)interplane.o
OBJSFIGHT = $(ENDFIGHT)fightGroup.o $(ENDFIGHT)initiative.o \
            $(ENDFIGHT)fightSystem.o
OBJSETC = $(ENDETC)animodel.o $(ENDETC)extensions.o $(ENDETC)message3d.o \
          $(ENDETC)scene.o $(ENDETC)scenenode.o $(ENDETC)cal3dmodel.o \
			 $(ENDETC)userinfo.o $(ENDETC)dirs.o $(ENDETC)quaternion.o \
			 $(ENDETC)md5model.o $(ENDETC)md5anim.o \
          $(ENDETC)overlaps.o $(ENDETC)defparser.o $(ENDETC)texrenderer.o \
          $(ENDETC)shader.o $(ENDETC)btreecell.o $(ENDETC)btree.o \
          $(ENDETC)npcfile.o $(ENDETC)list.o $(ENDETC)boundingbox.o
OBJSENGINE = $(ENDENGINE)alignwindow.o $(ENDENGINE)aspectwindow.o \
             $(ENDENGINE)attwindow.o $(ENDENGINE)barterwindow.o \
				 $(ENDENGINE)briefing.o $(ENDENGINE)camera.o \
				 $(ENDENGINE)charwindow.o $(ENDENGINE)classwindow.o \
				 $(ENDENGINE)collision.o $(ENDENGINE)dialog.o \
				 $(ENDENGINE)culling.o $(ENDENGINE)cursor.o \
				 $(ENDENGINE)dccnit.o $(ENDENGINE)initial.o \
				 $(ENDENGINE)inventwindow.o $(ENDENGINE)itemwindow.o \
				 $(ENDENGINE)journalwindow.o $(ENDENGINE)campaign.o \
				 $(ENDENGINE)levelup.o $(ENDENGINE)minimapwindow.o \
				 $(ENDENGINE)modstate.o $(ENDENGINE)options.o \
				 $(ENDENGINE)character.o $(ENDENGINE)racewindow.o \
				 $(ENDENGINE)savefile.o  $(ENDENGINE)savewindow.o \
				 $(ENDENGINE)skillwindow.o $(ENDENGINE)featsel.o \
				 $(ENDENGINE)moneywindow.o $(ENDENGINE)featswindow.o \
				 $(ENDENGINE)shadow.o $(ENDENGINE)shortcutswindow.o \
				 $(ENDENGINE)sky.o $(ENDENGINE)sun.o $(ENDENGINE)util.o
OBJS = area.o editor.o grasswindow.o guiIO.o listwindow.o mapEditor.o \
       message.o nodeeditor.o npcs.o objects.o particles.o portal.o \
		 tilewall.o terrain.o wall.o waterwindow.o

BIN = ../../../bin/

all: $(BIN)dntMapEditor

area.o: area.cpp area.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) area.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

editor.o: editor.cpp editor.h guiIO.h terrain.h portal.h wall.h message.h\
          objects.h particles.h npcs.h $(ENDENGINE)sun.h $(ENDENGINE)sky.h\
          $(ENDENGINE)character.h $(ENDENGINE)culling.h $(ENDENGINE)util.h\
          $(ENDPART)partcontroller.h $(ENDMAP)map.h nodeeditor.h tilewall.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) editor.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

grasswindow.o: grasswindow.cpp grasswindow.h $(ENDGUI)farso.h $(ENDPART)grass.h\
               $(ENDPART)partcontroller.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) grasswindow.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"	

guiIO.o: guiIO.cpp guiIO.h portal.h terrain.h listwindow.h grasswindow.h\
         waterwindow.h $(ENDGUI)farso.h $(ENDENGINE)camera.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) guiIO.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

listwindow.o: listwindow.cpp listwindow.h $(ENDGUI)farso.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) listwindow.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"	

mapEditor.o: mapEditor.cpp mapEditor.h editor.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) mapEditor.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

nodeeditor.o: nodeeditor.cpp nodeeditor.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) nodeeditor.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

message.o: message.cpp message.h $(ENDGUI)farso.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) message.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

npcs.o: npcs.cpp npcs.h message.h $(ENDMAP)map.h \
        $(ENDENGINE)util.h $(ENDENGINE)character.h $(ENDCLASSES)feats.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) npcs.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

objects.o: objects.cpp objects.h message.h $(ENDMAP)map.h\
           $(ENDENGINE)util.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) objects.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

particles.o: particles.cpp particles.h grasswindow.h waterwindow.h message.h\
             guiIO.h $(ENDMAP)map.h $(ENDPART)partcontroller.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) particles.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

portal.o: portal.cpp portal.h area.h message.h $(ENDMAP)map.h\
          $(ENDENGINE)util.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) portal.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

terrain.o: terrain.cpp terrain.h $(ENDMAP)map.h message.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) terrain.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

tilewall.o: tilewall.cpp tilewall.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) tilewall.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

wall.o: wall.cpp wall.h $(ENDMAP)map.h $(ENDGUI)draw.h message.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) wall.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

waterwindow.o: waterwindow.cpp waterwindow.h $(ENDPART)partcontroller.h\
               $(ENDGUI)farso.h
	@printf "Making $@...\n"
	@$(CC) $(CFLAGS) waterwindow.cpp -o $@
	@printf "\e[0;32mDone\e[0;0m ($@)\n"

$(BIN)dntMapEditor: $(FARSOLIB) $(OBJSIA) $(OBJSMAPA) $(OBJSENGINE) \
                    $(OBJSPART) $(OBJSCLASSES) $(OBJSLANG) $(OBJSETC) \
						  $(OBJSSOUND) $(OBJSFIGHT) $(OBJSCBOOK) $(OBJS)
	@printf "Linking $@...\n"
	@$(CC) $(EFLAGS) $(OBJSIA) $(OBJSMAPA) $(OBJSENGINE) $(OBJSPART) $(OBJSCLASSES) $(OBJSLANG) $(OBJSETC) $(OBJSSOUND) $(OBJSFIGHT) $(OBJSCBOOK) $(OBJS) $(FARSOLIB) -o $@
	@printf "\e[0;32mLinked\e[0;0m ($@)\n"

clean:
	@printf "Cleaning mapEditor Bin Files...\n"
	@\rm -rf *.o *.e $(BIN)dntMapEditor
	@printf "\e[0;32mCleaned.\e[0;0m\n"
